<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>        
        #canvas {
            border: 2px solid black;
        }
    </style>
</head>

<body>
    <canvas id="canvas" width="600" height="600"></canvas>
    
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script>
        // 시작
        // canvas 엘리먼트를 선언
        const canvas = document.getElementById('canvas');

        // 2d모드의 그리기 객체 취득
        const ctx = canvas.getContext("2d");       
        
        // 색을 설정
        ctx.fillStyle = 'blue';
        ctx.strokeStyle = 'red';

        //Jquery를 사용해서 canvas의 크기 반환
        var canvasWidth = $('#canvas').width();
        var canvasHeight = $('#canvas').height();


        // ###### Animation 영역


        // // ###### 시간 함수로 애니메이션 그리기
        // var end = Math.PI * 2;  // 원의 끝점 선언
        // var sec = 2;  // 총 그리는 시간 선언
        // var fps = 3; // frame per second 설정
        // for (var i = 0; i < (fps*sec)+1; i++) { // fps * sec + 1 만큼 반복해서 그려야함
        //     drawSet(i);
        // };

        // function drawSet(delay) {
        //     setTimeout(function() {
        //         ctx.clearRect(0, 0, 200, 200);
        //         ctx.beginPath();
        //         ctx.arc(100, 100, 50, 0, end / (fps*sec) * delay);  //한번에 그리는 각도는 end / (fps*sec) 에 증가하는 delay 값을 곱해서 호를 점점 그려나감
        //         ctx.stroke();
        //         console.log("Set")
        //     }, delay*1000/fps);  //1초가 1000 이므로 1000을 fps로 나누면 fps에 맞는 delay time 설정 가능
        // }
    
        
        // // ###### requestAnimationFrame 으로 애니메이션 그리기
        // var x = 0;
        // var myAni;
    
        // // ###### 무한 반복하는 애니메이션
        // function drawReqInfi() {
        //     //ctx.clearRect(200, 200, 250, 250);
        //     ctx.beginPath();
        //     ctx.arc(300, 300, 50 + x * 10, 0, Math.PI * x/100, false);  
        //     ctx.stroke();
        //     x += 1;
        //     console.log("Infi");

        //     requestAnimationFrame(drawReqInfi);
        // }
        // drawReqInfi();

        // // ###### 스탑 추가
        // var y = 0;
        // var myAni2;
                
        // function drawReqStop() {
        //     ctx.clearRect(400, 400, 600, 600);
        //     ctx.beginPath();
        //     ctx.arc(500, 500, 50, 0, Math.PI * y, false);            
        //     ctx.stroke();
        //     y += 1/60;
        //     console.log("Stop");

        //     myAni2 = requestAnimationFrame(drawReqStop);
            
        //     if(y>4) { // 720도 만큼 그리면 멈추게 설정
        //         cancelAnimationFrame(myAni2);
        //     }
        // }
        // drawReqStop();

        // ###### 나선 발산                
        var index = 0;
        var length = 1;
        var gap = 1;


        function drawReqInfi() {
            ctx.beginPath();
            
            let x = gap * (Math.cos((index * Math.PI) / 180));
            let y = gap * (Math.sin((index * Math.PI) / 180));
            ctx.arc(300 + x, 300 + y, 2, 0, 2 * Math.PI);
            
            ctx.fill();

            index++;
            gap += 0.1;
            
            requestAnimationFrame(drawReqInfi);
        }
        drawReqInfi();        
    </script>
</body>

</html>